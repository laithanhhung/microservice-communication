---
import '../styles/global.css';
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Microservice Communication Patterns</title>
    <link rel="icon" type="image/png" href="/logo.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="main-container">
        <header>
            <div class="header-indicator"></div>
            <h1>A Guide to Microservice Communication Patterns</h1>
            <div class="logo">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" />
                </svg>
                ByteByteGo
            </div>
        </header>

        <div class="diagram-grid">
            <!-- Top Row: Detailed Views -->
            <div class="detail-box area-shared-data-detail" id="box-detail-shared">
                <div class="detail-header yellow">
                    Communication with<br>Shared Data
                </div>
                <div class="diagram-content">
                    <div class="shared-data-visual">
                        <div class="server-group">
                            <div class="server-icon" data-label="Service A"></div>
                            <div class="server-icon" data-label="Service B"></div>
                            <div class="server-icon" data-label="Service C"></div>
                        </div>
                        <div class="file-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                            </svg>
                            <span>Shared File</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="detail-box area-event-driven-detail" id="box-detail-event">
                <div class="detail-header green">
                    Event-Driven with<br>Message Broker
                </div>
                <div class="diagram-content">
                    <div class="broker-visual">
                        <div class="server-icon left"></div>
                        <div class="broker-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="#be185d" stroke-width="2">
                                <rect x="2" y="5" width="20" height="14" rx="2" />
                                <path d="M2 10h20" />
                            </svg>
                            <span>Topic</span>
                        </div>
                        <div class="server-group-right">
                            <div class="server-icon small"></div>
                            <div class="server-icon small"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="detail-box area-async-req-res-detail" id="box-detail-async">
                <div class="detail-header pink">
                    Async Request<br>Response
                </div>
                <div class="diagram-content">
                    <div class="queue-visual">
                        <div class="queue-row">
                            <span class="arrow-right">→</span>
                            <div class="queue-box">
                                <span>|||</span> Queue
                            </div>
                            <span class="arrow-right">→</span>
                        </div>
                        <div class="queue-row return">
                            <span class="arrow-left">←</span>
                            <div class="queue-box">
                                <span>|||</span> Queue
                            </div>
                            <span class="arrow-left">←</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Middle Connectors (Labels) -->
            <div class="connector-label label-shared yellow" id="label-shared">Shared Data</div>
            <div class="connector-label label-event green" id="label-event">Event-Driven</div>
            <div class="connector-label label-req-res pink" id="label-async-req">Request<br>Response</div>

            <!-- Core Hub -->
            <div class="main-title-block purple" id="main-title-box">
                Microservice<br>Communication<br>Patterns
            </div>

            <div class="central-hub">
                <div class="hub-upper blue" id="hub-async">Asynchronous<br>Non-blocking</div>
                <div class="hub-lower purple-light" id="hub-sync">Synchronous<br>Blocking</div>
            </div>

            <div class="connector-label label-req-res-sync pink-light" id="label-sync-req">Request<br>Response</div>

            <!-- Bottom Section -->
            <div class="legend-list">
                <div class="legend-item" id="legend-1"><span class="num">1</span> Synchronous Request Response</div>
                <div class="legend-item" id="legend-2"><span class="num">2</span> Asynchronous Request Response</div>
                <div class="legend-item" id="legend-3"><span class="num">3</span> Shared Data Communication</div>
                <div class="legend-item" id="legend-4"><span class="num">4</span> Event-Driven Communication</div>
            </div>

            <div class="detail-box area-http-detail" id="box-detail-http">
                <div class="detail-header pink-light">
                    Request Response<br>over HTTP
                </div>
                <div class="diagram-content http-visual">
                    <div class="browser-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="3" y1="9" x2="21" y2="9"></line>
                        </svg>
                    </div>
                    <div class="api-connector">
                        <div class="api-box">API</div>
                    </div>
                    <div class="server-stack">
                        <div class="server-icon small"></div>
                        <div class="server-icon small"></div>
                        <div class="server-icon small"></div>
                    </div>
                </div>
            </div>

            <!-- SVG Overlay for Arrows -->
            <svg class="connections-layer" id="connections">
                <!-- Lines will be drawn here -->
            </svg>
        </div>
    </div>
    <script src="../scripts/main.js"></script>
</body>
</html>
